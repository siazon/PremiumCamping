<!DOCTYPE html
	PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:c="http://xmlns.jcp.org/jsp/jstl/core"
	xmlns:p="http://primefaces.org/ui">

<!-- <ui:composition template="">
	</ui:composition> -->



<h:head>
	<title>Modify Reservation</title>
	<meta http-equiv="expires" content="0"></meta>
	<link href="./resources/img/logo.ico" rel="icon" />
	<link
		href="./resources/lib/tempusdominus/css/tempusdominus-bootstrap-4.min.css"
		rel="stylesheet" />
	<!-- <link href="https://maxcdn.bootstrapcdn.com/bootstrap/5.2.0/css/bootstrap.min.css" rel="stylesheet" /> -->
	<!-- <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.3.1/dist/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous"/> -->
	<link href="./resources/css/style.css" rel="stylesheet" />
	<style>


.mainView {
	background-repeat: no-repeat;
	background-size: 100%;
	position: absolute;
	
	width: 100%;
	height: 100%;
	
	overflow: hidden; /* Hide scrollbars */
}


.ui-state-default {
	box-shadow: none;
}

a {
	text-decoration: none !important;
}
</style>
</h:head>

<h:body class="img-fluid mainView"
	style="background-attachment: fixed; background-position: center;">
	<div id="NavBar"></div>

	<div class="text-center"
		style="background-attachment: fixed; background-position: center;">
	

		<!-- Main Start -->
		<div class="container-fluid p-0" style="margin-top: 43px">
			<div id="header-carousel" class="carousel slide" data-ride="carousel">
				<div class="carousel-inner">
					<div class="carousel-item active">
						<img class="w-100" src="./resources/img/staff.jpg" alt="Image"></img>
						<div
							class="carousel-caption d-flex flex-column align-items-center justify-content-center">
							<div class="p-3" style="max-width: 900px;">
								<h4 class="text-white text-uppercase mb-md-3">Premium
									Camping</h4>
								<h2 class="text-white mb-md-4">Modify Reservation</h2>
							</div>


							<div class="container">

								<div class="row mb-2">
									<h:form id="searchForm">
										<div class="row">
											<div class="form-inline mt-2 mt-md-0"
												style="display: block !important; padding: 20px !important;">
												<p:inputText class="form-control mr-sm-2" type="text"
													placeholder="Reservation No." aria-label="Search"
													style="width: 200px;"
													value="#{modifyBookingBean.searchContent}" />
												<p:commandButton
													class="btn btn-outline-success my-2 my-sm-0" value="Search"
													style="padding: 0px !important;  background-image: none !important; display: inline;"
													action="#{modifyBookingBean.Search}">
												</p:commandButton>
											</div>
										</div>



										<hr class="mb-4" />
										<p:dataTable var="bookings"
											value="#{modifyBookingBean.bookings}">
											<p:column headerText="Reservation No.">
												<h:outputText value="#{bookings.reservationNo}" />
											</p:column>
											<p:column headerText="Name">
												<h:outputText value="#{bookings.user.name}" />
											</p:column>

											<p:column headerText="CheckIn Date">
												<h:outputText class="badge badge-pill"
													value="#{bookings.checkinTime}">
													<f:convertDateTime pattern="dd/MM/yyyy" />
												</h:outputText>
											</p:column>
											<p:column headerText="CheckOut Date">
												<h:outputText class="badge badge-pill"
													value="#{bookings.checkoutTime}">
													<f:convertDateTime pattern="dd/MM/yyyy" />
												</h:outputText>
											</p:column>
											<p:column headerText="Camping Package">
												<h:outputText value="#{bookings.campingPackage.location}" />
											</p:column>
											<p:column headerText="Price">
												<h:outputText value="â‚¬#{bookings.amountString}" >
													<f:convertNumber type="number" groupingUsed="true" minFractionDigits="2" pattern="#0.00" />
													</h:outputText>
											</p:column>
											
											<p:column headerText="State">
												<h:outputText
													style=" border-radius:5px; padding: 5px; background-color: #cde3ba;"
													value="#{bookings.state}" />
											</p:column>
											<p:column headerText="Date Updated">
												<h:outputText value="#{bookings.bookingTime}">
													<f:convertDateTime pattern="dd/MM/yyyy" />
												</h:outputText>
											</p:column>
											<p:column headerText="Cancel Reservation">
												<p:commandButton
													class="btn btn-primary py-md-3 px-md-5 mt-2" value="Cancel"
													style="padding: 0px !important;background-image: none !important; background-color: none !important; "
													action="#{modifyBookingBean.Cancel()}">
													<f:param name="action" value="#{bookings.reservationNo}" />
												</p:commandButton>
											</p:column>
											<p:column headerText="Rebook Reservation">
												<p:commandButton
													class="btn btn-primary py-md-3 px-md-5 mt-2" value="Rebook"
													style="padding: 0px !important;background-image: none !important; background-color: none !important; "
													action="#{modifyBookingBean.Rebook()}">
													<f:param name="action" value="#{bookings.reservationNo}" />
												</p:commandButton>
											</p:column>
											<p:column headerText="Update Reservation">
												<p:commandButton class="btn btn-outline-primary"
													value="Detail"
													style=" padding: 0px !important; background-image: none !important;"
													action="#{editBookingDetailBean.GetDetail(bookings.reservationNo)}">
												</p:commandButton>
											</p:column>

										</p:dataTable>
										<hr class="mb-4" />
										<p>
											<!-- <a href="#" class="btn btn-success btn-lg" style="margin: 20px 0;" data-toggle="modal"
							data-target="#exampleModal">Add a extra</a> <a href="#" class="btn btn-primary btn-lg"
							style="margin: 20px;">Save</a> -->
											<a href="staffDashboard.xhtml"
												class="btn btn-outline-primary btn-lg "
												style="margin: 20px 0;">Back to Dashboard</a>
										</p>

									</h:form>



									<!-- Modal -->
									<div class="modal" id="exampleModal" tabindex="-1"
										role="dialog" aria-labelledby="exampleModalLabel"
										aria-hidden="true">
										<div class="modal-dialog" role="document">
											<div class="modal-content">
												<div class="modal-header">
													<h3 class="my-0 mr-md-auto  font-weight-bold"
														onclick="displayHome()">
														<img src="./resources/img/logo.ico"
															style="height: 40px; width: 40px; margin: 0 10px;" />Premium
														Camping
													</h3>
													<button type="button" class="close" data-dismiss="modal"
														aria-label="Close">
														<span aria-hidden="true"></span>
													</button>
												</div>
												<div class="modal-body">
													<ul class="list-group mb-3">
														<div class="btn-group btn-group-toggle"
															data-toggle="buttons" style="text-align: left;">
															<label class="btn btn-primary active"> <input
																type="radio" name="options" id="option1"
																autocomplete="off" checked="true" /> Restaurant
															</label> <label class="btn btn-primary"> <input
																type="radio" name="options" id="option2"
																autocomplete="off" /> Food Takeaway
															</label> <label class="btn btn-primary"> <input
																type="radio" name="options" id="option2"
																autocomplete="off" /> Babysitting
															</label>
														</div>
														<div>
															<li
																class="list-group-item d-flex justify-content-between lh-condensed">
																<div>
																	<h6 class="my-0">Product name</h6>
																	<small class="text">Restaurant</small>
																</div> <span class="text">$12</span>
															</li>
															<li
																class="list-group-item d-flex justify-content-between lh-condensed">
																<div>
																	<h6 class="my-0">Product name</h6>
																	<small class="text">Restaurant</small>
																</div> <span class="text">$12</span>
															</li>
														</div>


														<div class="hidden">
															<li
																class="list-group-item d-flex justify-content-between lh-condensed">
																<div>
																	<h6 class="my-0">Product name</h6>
																	<small class="text">Restaurant</small>
																</div> <span class="text">$12</span>
															</li>
															<li
																class="list-group-item d-flex justify-content-between lh-condensed">
																<div>
																	<h6 class="my-0">Product name</h6>
																	<small class="text">Restaurant</small>
																</div> <span class="text">$12</span>
															</li>
														</div>
													</ul>


												</div>
												<div class="modal-footer">
													<button type="button" class="btn btn-secondary"
														data-dismiss="modal">Close</button>
													<button type="button" class="btn btn-primary">Save
														changes</button>
												</div>
											</div>
										</div>
									</div>
								</div>
							</div>

						</div>
					</div>




				</div>
			</div>
		</div>
	</div>


	<!-- Here -->



	<script src="https://cdn.staticfile.org/jquery/1.10.2/jquery.min.js" />
	<script src="http://code.jquery.com/ui/1.11.0/jquery-ui.js"></script>
	<script src="./resources/js/popper.min.js"></script>
	<script src="./resources/js/bootstrap.min.js"></script>
	<script type="text/javascript">
		const urlParams = new URLSearchParams(window.location.search);
		console.log("load:", urlParams.get("id"))



		function initBar() {
			$("#NavBar").load("NavBar.html");

		}
		initBar();

		function init() {
			var countTemp = localStorage.getItem('RegisterTimeOut');

			if (false) {// (countTemp > 0) {
				settime(countTemp);
			} else {
				$("#divSendCode").show();
				$("#btnSendCode").hide();
			}
		}
		function onblusEmail() {

			FacesContext.getCurrentInstance().addMessage("signupMsg",
				new FacesMessage("Done"));
			return;
			var re = /^(\w-*\.*)+@(\w-?)+(\.\w{2,})+$/
			var str = document.getElementById("rForm:txtEmail").value;
			if (re.test(str)) {
				$("#tEmail").text("")
			} else {
				$("#tEmail").text(" (Invalid Email address)")
			}
		}

		function onblusPWD() {
			var str = document.getElementById("rForm:txtPWD").value;
			var str1 = document.getElementById("rForm:txtPWD1").value;
			if (str == str1) {
				$("#tpassword").text("")
			} else {
				$("#tpassword").text(" (Password not match)")
			}
		}

		function RegistComplete(xhr, status, args) {
			console.log('RegistComplete: ', args);
			if (args.msg != undefined) {
				if (args.msg == "OK") {
					window.location.href = "login.xhtml";
				}
			}
		}

		function handleComplete(xhr, status, args) {
			console.log('callback: ', args);
			settime(60)
		}

		function settime(countdown) {
			if (countdown == 0) {
				$("#divSendCode").show();
				$("#btnSendCode").hide();
				countdown = 60;
			} else {
				$("#divSendCode").hide();
				$("#btnSendCode").show();
				$("#btnSendCode").text("Resend(" + countdown + ")");
				countdown--;
				localStorage.setItem("RegisterTimeOut", countdown);
				setTimeout(function () {
					settime(countdown)
				}, 1000)
			}

		}
		init();
	</script>
</h:body>

</html>
